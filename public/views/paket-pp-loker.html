<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loker Kesehatan ID</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4/animate.min.css" />
    <link rel="stylesheet" href="../assets/biolink.css">
</head>

<body>
    <div class="container">
        <button class="dark-toggle" id="darkToggle"><i class="fas fa-moon"></i></button>
        <header>
            <h1>Loker Kesehatan ID</h1>
            <h2>Paket Paid Promote</h2>
        </header>

        <div id="linksContainer">Sedang memuat data...</div>

        <footer>
            <a href="">Loker Kesehatan ID</a> Â© 2018 - <span id="year"></span>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        document.getElementById("year").textContent = new Date().getFullYear();

        // Dark Mode
        const toggleBtn = document.getElementById("darkToggle");
        const body = document.body;
        if (localStorage.getItem("darkMode") === "true") {
            body.classList.add("dark");
            toggleBtn.innerHTML = '<i class="fas fa-sun"></i>';
        }
        toggleBtn.addEventListener("click", () => {
            body.classList.toggle("dark");
            const isDark = body.classList.contains("dark");
            localStorage.setItem("darkMode", isDark);
            toggleBtn.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        });

        // === Ambil data dari GAS ===
        const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyqJ4u8maNKM97iqKl511Q9K8pY5_SnJQajA6Gtt7I6-RrZfq2ZT79zbmYsmYT8Sq28/exec?site=B"; // ganti dengan URL Web App kamu

        fetch(WEB_APP_URL)
            .then(response => response.json())
            .then(data => renderLinks(data))
            .catch(err => {
                document.getElementById("linksContainer").textContent = "Gagal memuat data.";
                console.error("Error:", err);
            });

        function renderLinks(links) {
            const container = document.getElementById("linksContainer");
            container.innerHTML = "";

            const validLinks = links.filter(link =>
                link.url && link.url.trim() !== "" &&
                link.label && link.label.trim() !== ""
            );

            if (validLinks.length === 0) {
                container.textContent = "Tidak ada data link untuk ditampilkan.";
                return;
            }

            // Render hanya link yang valid
            validLinks.forEach(link => {
                const a = document.createElement("a");
                a.href = link.url;
                a.className = `btn ${link.color || "btn-default"}`;
                a.innerHTML = `
        ${link.icon ? `<i class="${link.icon}"></i>` : ""}
        ${link.label}
        `;
                a.target = "_blank";
                container.appendChild(a);
            });
        }
    </script>
</body>

</html>